(()=>{var e={150:function(e,n){var t,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],t=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const n="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,n=void 0){super(n),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=e=>e&&"object"==typeof e&&"function"==typeof e.then,s=(n,t)=>(...r)=>{e.runtime.lastError?n.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||r.length<=1&&!1!==t.singleCallbackArg?n.resolve(r[0]):n.resolve(r)},a=e=>1==e?"argument":"arguments",i=(e,n)=>function(t,...r){if(r.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${a(n.minArgs)} for ${e}(), got ${r.length}`);if(r.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${a(n.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((o,a)=>{if(n.fallbackToNoCallback)try{t[e](...r,s({resolve:o,reject:a},n))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),t[e](...r),n.fallbackToNoCallback=!1,n.noCallback=!0,o()}else n.noCallback?(t[e](...r),o()):t[e](...r,s({resolve:o,reject:a},n))}))},d=(e,n,t)=>new Proxy(n,{apply:(n,r,o)=>t.call(r,e,...o)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,n={},t={})=>{let r=Object.create(null),o={has:(n,t)=>t in e||t in r,get(o,s,a){if(s in r)return r[s];if(!(s in e))return;let m=e[s];if("function"==typeof m)if("function"==typeof n[s])m=d(e,e[s],n[s]);else if(l(t,s)){let n=i(s,t[s]);m=d(e,e[s],n)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(l(n,s)||l(t,s)))m=c(m,n[s],t[s]);else{if(!l(t,"*"))return Object.defineProperty(r,s,{configurable:!0,enumerable:!0,get:()=>e[s],set(n){e[s]=n}}),m;m=c(m,n[s],t["*"])}return r[s]=m,m},set:(n,t,o,s)=>(t in r?r[t]=o:e[t]=o,!0),defineProperty:(e,n,t)=>Reflect.defineProperty(r,n,t),deleteProperty:(e,n)=>Reflect.deleteProperty(r,n)},s=Object.create(e);return new Proxy(s,o)},m=e=>({addListener(n,t,...r){n.addListener(e.get(t),...r)},hasListener:(n,t)=>n.hasListener(e.get(t)),removeListener(n,t){n.removeListener(e.get(t))}}),g=new r((e=>"function"!=typeof e?e:function(n){const t=c(n,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),u=new r((e=>"function"!=typeof e?e:function(n,t,r){let s,a,i=!1,d=new Promise((e=>{s=function(n){i=!0,e(n)}}));try{a=e(n,t,s)}catch(e){a=Promise.reject(e)}const l=!0!==a&&o(a);if(!0!==a&&!l&&!i)return!1;const c=e=>{e.then((e=>{r(e)}),(e=>{let n;n=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:n})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return c(l?a:d),!0})),f=({reject:t,resolve:r},o)=>{e.runtime.lastError?e.runtime.lastError.message===n?r():t(new Error(e.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?t(new Error(o.message)):r(o)},p=(e,n,t,...r)=>{if(r.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${a(n.minArgs)} for ${e}(), got ${r.length}`);if(r.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${a(n.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,n)=>{const o=f.bind(null,{resolve:e,reject:n});r.push(o),t.sendMessage(...r)}))},A={devtools:{network:{onRequestFinished:m(g)}},runtime:{onMessage:m(u),onMessageExternal:m(u),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},c(e,A,t)};e.exports=t(chrome)}},void 0===(o="function"==typeof t?t.apply(n,r):t)||(e.exports=o)}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return e[r].call(s.exports,s,s.exports,t),s.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";function e(e,n,t,r){return new(t||(t=Promise))((function(o,s){function a(e){try{d(r.next(e))}catch(e){s(e)}}function i(e){try{d(r.throw(e))}catch(e){s(e)}}function d(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,i)}d((r=r.apply(e,n||[])).next())}))}Object.create;Object.create;var n,r,o,s,a,i,d,l,c,m,g,u,f=t(150),p=t.n(f);!function(e){e[e.pre=0]="pre",e[e.after=1]="after",e[e.getExtDrmKey=2]="getExtDrmKey"}(n||(n={})),function(e){e[e.single=0]="single",e[e.bulk=1]="bulk",e[e.bloburl=2]="bloburl",e[e.changeUrl=3]="changeUrl",e[e.login=4]="login",e[e.googleLogin=5]="googleLogin",e[e.register=6]="register",e[e.sendEmailCode=7]="sendEmailCode",e[e.getDrmSecretKey=8]="getDrmSecretKey",e[e.getConfig=9]="getConfig",e[e.getMemberInfo=10]="getMemberInfo",e[e.updateNoPerDayDownloadCount=11]="updateNoPerDayDownloadCount"}(r||(r={})),function(e){e[e.goSubscribe=0]="goSubscribe",e[e.pureNotice=1]="pureNotice",e[e.drmLicense=2]="drmLicense",e[e.retryMessage=3]="retryMessage",e[e.serverError=4]="serverError"}(o||(o={})),function(e){e[e.Edge=0]="Edge",e[e.Chrome=1]="Chrome",e[e.Firefox=2]="Firefox",e[e.Opera=3]="Opera",e[e.Safari=4]="Safari",e[e.Unknown=5]="Unknown"}(s||(s={})),function(e){e.default="log",e.warn="warn",e.error="error"}(a||(a={})),function(e){e.install="install",e.uninstall="uninstall",e.downloadSignalUnkown="downloadSignalUnkown",e.downloadSignalImg="downloadSignalImg",e.downloadSignalVideo="downloadSignalVideo",e.downloadBulk="downloadBulk",e.changeUrl="changeUrl",e.register="register",e.login="login",e.googleLogin="googleLogin",e.sendEmailCode="sendEmailCode",e.uploadFiles="uploadFiles",e.concatVideoAndAudio="concatVideoAndAudio"}(i||(i={})),function(e){e.downloadSuccess="downloadSuccess",e.downloadError="downloadError",e.downloadCancle="downloadCancle",e.downloadWating="downloadWating",e.downloadPrepare="downloadPrepare",e.downloadStuck="downloadStuck"}(d||(d={})),function(e){e.addOrUpdateDownloadingInfo="addOrUpdateDownloadingInfo",e.updateDownloadStatus="updateDownloadStatus"}(l||(l={})),function(e){e[e.refresh=0]="refresh"}(c||(c={})),function(e){e.downloading="downloading",e.downloaded="downloaded",e.download="download",e.all="all",e.quota="quota"}(m||(m={})),function(e){e.processVideo="processVideo",e.processVideoInWeb="processVideoInWeb",e.processVideoByUrl="processVideoByUrl"}(g||(g={})),function(e){e.serverError="serverError",e.tip="tip"}(u||(u={}));var A;let x=A=class{constructor(){A.initStyle(),A.setEmailAddress(),A.getUserInfo(),document.getElementById("jumpDiscard").onclick=()=>{A.jumpDiscard()},document.getElementById("copyEmail").onclick=()=>{A.copyEmail()},document.getElementById("GuestBtn").onclick=()=>{A.jumpPay()},document.getElementById("MemberBtn").onclick=()=>{A.jumpPay()},document.getElementById("OtherBtn").onclick=()=>{A.jumpPay()}}static initStyle(){const e=document.createElement("style");let n="url("+p().runtime.getURL("assets/imgs/Email.png")+")",t="url("+p().runtime.getURL("assets/imgs/discard-green.png")+")",r="url("+p().runtime.getURL("assets/imgs/optionlogo.png")+")";e.innerHTML=`\n            :root {\n                --addon-email: ${n};\n                --addon-discard-green: ${t};\n                --addon-optionlogo: ${r};\n            }\n        `,document.head.appendChild(e)}static setEmailAddress(){let e=document.getElementById("emailAddress");e&&(e.textContent="service.udemydownloader@outlook.com")}static getUserInfo(){return e(this,void 0,void 0,(function*(){const e=yield A.getUserMemberInfo();document.getElementById("userId").textContent=e.userId;document.getElementById("guest_canDownloadCount").textContent = "Unlimited";document.getElementById("member_canDownloadCount").textContent = "Unlimited";document.getElementById("promember_canDownloadCount").textContent = "Unlimited";["GuestDiv", "OtherDiv", "MemberDiv", "ProMemberDiv"].forEach(divId => { document.getElementById(divId).style.display = "block"; });}))}static calculateNoPerDayDownloadCount(n){return e(this, void 0, void 0, function* () { return { noPerDayMaxDownloadCount: Infinity, hasDownloadCount: 0, noPerDayMemberName: "Unlimited" }; });}static jumpPay(){return e(this,void 0,void 0,(function*(){const e="https://www.bestaddons.store/ytbdserver/downloader/webtransfer/ude/pay-guide?userId="+(yield h()).userId+"&extId=a5376339-a50f-f096-248c-0e0cdde4f9af&version="+p().runtime.getManifest().version;window.open(e+"","_blank")}))}static jumpDiscard(){return e(this,void 0,void 0,(function*(){let e=yield b("discordUrl");window.open(e+"","_blank")}))}static copyEmail(){return e(this,void 0,void 0,(function*(){navigator.clipboard.writeText("service.udemydownloader@outlook.com").then((()=>{document.getElementById("email").textContent="email address copied."})).catch((e=>{alert("Failed to copy email!"),console.log("Failed to copy: ",e)}))}))}static getUserMemberInfo(){return e(this,void 0,void 0,(function*(){let e=yield h();const n=yield w.getUserMemberInfo(e.userId,p().runtime.getManifest().version);return n&&(e.noPerDayMemberList=n.noPerDayMemberList,e.memberName=n.memberName,e.maxDownloadCount=n.maxDownloadCount,e.downloadedCount=null==n.downloadedCount?0:n.downloadedCount,e.allDownloadedCount=null==n.allDownloadedCount?0:n.allDownloadedCount,e.expiredTime=n.expiredTime,e.canBusiness=n.canBusiness,yield v("UdemyDownloaderUserInfo",e),yield v("downloadCount",e.downloadedCount)),e}))}};x=A=function(e,n,t,r){var o,s=arguments.length,a=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(s<3?o(a):s>3?o(n,t,a):o(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a}([function(e){return new Proxy(e,{construct:(e,n,t)=>e.prototype!==t.prototype?Reflect.construct(e,n,t):(e.SINGLETON_INSTANCE||(e.SINGLETON_INSTANCE=Reflect.construct(e,n,t)),e.SINGLETON_INSTANCE)})}],x);new x})()})();
